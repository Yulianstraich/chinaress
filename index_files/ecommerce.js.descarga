function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./apps-startup.js","./shared.js","./vendor.js","./apps-js-api.js","./apps-tracker.js","./apps-add-to-bag.js","./apps-categories-v1.js","./apps-categories-v2.js","./apps-minicart-v1.js","./apps-minicart-v2.js","./apps-product-thumbnail.js","./apps-product-browser.js","./apps-product-browser-popup.js","./apps-search-panel.js","./apps-search-widget.js","./apps-single-product.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
const Ve="modulepreload",ke=function(t,e){return new URL(t,e).href},ce={},f=function(e,r,n){let o=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link");o=Promise.all(r.map(s=>{if(s=ke(s,n),s in ce)return;ce[s]=!0;const u=s.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===s&&(!u||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Ve,u||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),u)return new Promise((d,p)=>{c.addEventListener("load",d),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})}))}return o.then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var Fe=Object.defineProperty,We=(t,e,r)=>e in t?Fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ae=(t,e,r)=>(We(t,typeof e!="symbol"?e+"":e,r),r);const N={ALL:"ALL",PARTIAL:"PARTIAL",DEFAULT:"DEFAULT"},L={INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",LOG:"LOG"};function Be(t){switch(t){case L.INFO:return console.info;case L.WARNING:return console.warn;case L.ERROR:return console.error;case L.LOG:return console.info;default:throw new Error(`Unknown log level '${t}'`)}}const B="ALL";function Ge(t){return["%c%s",`background: ${t.background}; color: ${t.color}; padding: 1px 4px`,t.badgeName]}class He{constructor(e){ae(this,"localStorageKey"),ae(this,"isGreetingsPrinted",!1),this.localStorageKey=e}createDebugGreetingsData(e){const r="",n='font-family: "Monospace"; font-size: 1.1em';return[`%cTo enable all development logs please run in development console:
%c    localStorage.setItem("${this.localStorageKey}", "${B}")
%cInstead of %c${B} %cyou can use comma separated event types list to partially enable logs.
Available event types are: %O`,r,n,r,n,r,e]}printGreetingsIfNeeded(e){this.isGreetingsPrinted||(this.isGreetingsPrinted=!0,console.log(...this.createDebugGreetingsData(e)))}printLog(e,r,...n){const o=Ge(e);Be(r)(...o,...n)}getEventTypesToLog(){try{const e=window.localStorage.getItem(this.localStorageKey);return e===""||e===null?{type:N.DEFAULT}:e===B||e==="true"?{type:N.ALL}:{type:N.PARTIAL,events:e.split(",")}}catch{return{type:N.DEFAULT}}}}function v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var Je={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function $(t,e){function r(o,i,s){if(!(typeof document>"u")){s=v({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var l in s)s[l]&&(u+="; "+l,s[l]!==!0&&(u+="="+s[l].split(";")[0]));return document.cookie=o+"="+t.write(i,o)+u}}function n(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var i=document.cookie?document.cookie.split("; "):[],s={},u=0;u<i.length;u++){var l=i[u].split("="),m=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(s[c]=t.read(m,c),o===c)break}catch{}}return o?s[o]:s}}return Object.create({set:r,get:n,remove:function(o,i){r(o,"",v({},i,{expires:-1}))},withAttributes:function(o){return $(this.converter,v({},this.attributes,o))},withConverter:function(o){return $(v({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var C=$(Je,{path:"/"});class E{static getEntryPointQueryParams(){return E.entryPointQueryParams}static setEntryPointQueryParams(e){E.entryPointQueryParams=e}static getEcommerceJsParams(){return E.ecommerceJsParams}static setEcommerceJsParams(e){E.ecommerceJsParams=e}}const q={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},Q="ec-cart-widget",a={ADD_TO_BAG:"AddToBag",CATEGORIES_V2:"CategoriesV2",HORIZONTAL_CATEGORIES_V1:"Categories",MINICART_V1:"Minicart",MINICART_V2:"MinicartV2",PRODUCT:"Product",PRODUCT_BROWSER:"ProductBrowser",PRODUCT_THUMBNAIL:"ProductThumbnail",SEARCH_PANEL:"SearchPanel",SEARCH_WIDGET:"SearchWidget",SINGLE_PRODUCT:"SingleProduct",VERTICAL_CATEGORIES_V1:"VCategories"},I={UNMOUNTED:"UNMOUNTED",MOUNTING:"MOUNTING",MOUNTED:"MOUNTED"};function T(){return window._xnext_initialization_scripts}function $e(t){window._xnext_initialization_scripts=window._xnext_initialization_scripts.filter(e=>!t(e))}function k(t){T().push(t)}function Z(t){return T().find(e=>e.element===t)}function Te(){return T().filter(t=>t.mountState===void 0||t.mountState===I.UNMOUNTED)}function ue(){return T().filter(t=>t.mountState===I.MOUNTED)}function un(){$e(t=>t.widgetType===a.PRODUCT_BROWSER)}function Se(){return T().some(t=>t.widgetType===a.PRODUCT_BROWSER)}function qe(){return T().some(t=>t.widgetType===a.PRODUCT||t.widgetType===a.SINGLE_PRODUCT)}function ye(){return T().some(t=>t.widgetType===a.MINICART_V1||t.widgetType===a.MINICART_V2)}function _e(){var r,n,o;const t=[a.PRODUCT_BROWSER,a.SINGLE_PRODUCT,a.PRODUCT,a.MINICART_V1,a.CATEGORIES_V2,a.VERTICAL_CATEGORIES_V1];for(const i of t){const s=(n=(r=T().filter(u=>u.widgetType===i))==null?void 0:r.reverse())==null?void 0:n[0];if(s!==void 0)return(o=s.element)==null?void 0:o.parentNode}const e=document.getElementsByClassName(Q);if(e.length>0){const i=e[e.length-1];return i==null?void 0:i.parentNode}}function j(t,e){var r;if(((r=document.defaultView)==null?void 0:r.getComputedStyle)!==void 0)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function je(){const t={},e=_e();if(e!==void 0){const r=j(e,"font-family");r!==void 0&&(t["font-family"]=r)}return t}function Ye(t){var n;const e=document.createElement("a");e.href="",e.textContent="",t.appendChild(e);const r=((n=document.defaultView)==null?void 0:n.getComputedStyle(e,null).color)??"";return t.removeChild(e),r}function ze(t){let e=t,r=j(e,"background-color");for(;r===void 0||r==="transparent"||r==="#000000"||r==="rgba(0, 0, 0, 0)";)e===document.documentElement?r="white":(e=e.parentNode,r=j(e,"background-color"));return r}function Ke(t,e){var n;let r;if(((n=e==null?void 0:e.chameleon)==null?void 0:n.font)!==void 0&&(r=e.chameleon.font),(r===void 0&&t||r==="auto")&&(r=je()),r!==void 0){const i=r["font-family"];if(i!==void 0){const s=i.split(/,\s*/);let u="",l="";for(const m of s){if(u.length+m.length+l.length>150)break;u+=l+m,l=","}return u}}}function Xe(t,e){var r,n;return t&&(((n=(r=e==null?void 0:e.chameleon)==null?void 0:r.gallery)==null?void 0:n.useExactColors)??!1)}function Qe(){var t;return((t=window.top)==null?void 0:t.location)!==window.location}function Ze(t,e){var m,c;let r;((m=e==null?void 0:e.chameleon)==null?void 0:m.colors)!==void 0&&(r=(c=e==null?void 0:e.chameleon)==null?void 0:c.colors);const n=document.styleSheets.length===0;if(r!==void 0&&r!=="auto"||!t||n)return r!=="auto"?r:{};const o={},i=_e();if(i===void 0)return o;const s=getComputedStyle(i,null).color;s.replace(/ /g,"")!=="rgba(0,0,0,0)"&&s!=="transparent"&&(o["color-foreground"]=s,o["color-price"]=o["color-foreground"]);const u=ze(i);u.replace(/ /g,"")!=="rgba(0,0,0,0)"&&u!=="transparent"?o["color-background"]=u:o["color-background"]="white";const l=Ye(i);return l.replace(/ /g,"")!=="rgba(0,0,0,0)"&&l!=="transparent"&&(o["color-link"]=l),o}function Ce(t,e){const r=t&&!Qe();return{colors:Ze(r,e),fontFamily:Ke(r,e),useExactColors:Xe(r,e)}}const et="ecwid_body";function tt(){let t;const r=document.getElementsByTagName("body")[0];return r!==void 0&&(r.id===""&&(r.id=et),t=r.id),t}const rt="ecwid_html";function nt(){let t;const r=document.getElementsByTagName("html")[0];return r!==void 0&&(r.id===""&&(r.id=rt),t=r.id),t}function Pe(t,e){if(e===void 0)return t;let r;const n=Promise.race([t,new Promise((o,i)=>{r=setTimeout(()=>{i(new Error(`Timeout exceeded (${e} ms)`))},e)})]);return n.finally(()=>clearTimeout(r)),n}const w={SUCCESS:"success",DUPLICATE:"duplicate",FAILED:"failed"};var ot=Object.defineProperty,it=(t,e,r)=>e in t?ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G=(t,e,r)=>(it(t,typeof e!="symbol"?e+"":e,r),r);const H={ALL:"ALL",PARTIAL:"PARTIAL",DEFAULT:"DEFAULT"},y={INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",LOG:"LOG"};class st{constructor(e,r){G(this,"eventsLogSettings"),G(this,"loggerImpl"),G(this,"allowedEventTypes"),this.eventsLogSettings=e,this.loggerImpl=r,this.allowedEventTypes=Object.keys(this.eventsLogSettings).sort()}isNeedLogEvent(e,r,n){const o=n.type;switch(o){case H.ALL:return!0;case H.PARTIAL:return n.events.some(i=>i===e);case H.DEFAULT:return r.isDefault===!0;default:throw new Error(`Unknown event types to log '${o}'`)}}doLog(e,r,...n){this.loggerImpl.printGreetingsIfNeeded(this.allowedEventTypes);const o=this.eventsLogSettings[e];(r===y.WARNING||r===y.ERROR||this.isNeedLogEvent(e,o,this.loggerImpl.getEventTypesToLog()))&&this.loggerImpl.printLog(o,r,...n)}info(e,...r){this.doLog(e,y.INFO,...r)}warn(e,...r){this.doLog(e,y.WARNING,...r)}error(e,...r){this.doLog(e,y.ERROR,...r)}log(e,...r){this.doLog(e,y.LOG,...r)}}const g={APP_LIFECYCLE:"APP_LIFECYCLE",DEPRECATION:"DEPRECATION",JS_API:"JS_API",PERSISTENCE:"PERSISTENCE",RESOURCES:"RESOURCES",REST:"REST",ROUTER:"ROUTER",MUTATION:"MUTATION",SUSPENSE:"SUSPENSE",SSR:"SSR",TODO:"TODO",TRACKER:"TRACKER"},ct={[g.APP_LIFECYCLE]:{badgeName:"app-lifecycle",background:"#006400",color:"#ffffff"},[g.DEPRECATION]:{badgeName:"deprecation",background:"#8b4513",color:"#ffffff",isDefault:!0},[g.JS_API]:{badgeName:"js-api",background:"#800080",color:"#ffffff"},[g.MUTATION]:{badgeName:"mutation",background:"#FFFF00",color:"#000000"},[g.PERSISTENCE]:{badgeName:"persistence",background:"#ff8c00",color:"#ffffff"},[g.RESOURCES]:{badgeName:"resources",background:"#20b2aa",color:"#ffffff"},[g.REST]:{badgeName:"rest",background:"#20b2aa",color:"#ffffff"},[g.ROUTER]:{badgeName:"router",background:"#1e90ff",color:"#ffffff"},[g.SUSPENSE]:{badgeName:"suspense",background:"#daa520",color:"#ffffff"},[g.SSR]:{badgeName:"ssr",background:"#191970",color:"#ffffff",isDefault:!0},[g.TODO]:{badgeName:"todo",background:"#8b0000",color:"#ffffff",isDefault:!0},[g.TRACKER]:{badgeName:"tracker",background:"#8a2be2",color:"#ffffff"}};class at extends st{constructor(e){super(ct,e)}}function ee(t){return t!==void 0?[t]:[]}function we(t){return new Date().getTime()-t.getTime()}function Re(t){const e=[`#${t.resourceLoadIndex}`,t.resourceType,"⮕",t.resourceUrl,...ee(t.attributes)];t.logger.info(g.RESOURCES,...e)}function Oe(t){const e=we(t.requestStartTime),r=[`#${t.resourceLoadIndex}`,t.resourceType,"⬅",`[${e} ms]`,t.resourceUrl,...ee(t.attributes)];t.logger.info(g.RESOURCES,...r)}function b(t){const e=we(t.requestStartTime),r=[`#${t.resourceLoadIndex}`,t.resourceType,"⛌",`[${e} ms]`,t.resourceUrl,...ee(t.attributes),t.errorDetails];t.logger.warn(g.RESOURCES,...r)}function de(t,e,r,n,o){const i=document.querySelectorAll(`script[src='${t}']`);if(i.length>0){const c={type:w.DUPLICATE,scriptElement:i[0]};return Promise.resolve(c)}const s=(r.resourceLoadIndex??0)+1;r.resourceLoadIndex=s;const u="🔨 JS",l=new Date;Re({resourceLoadIndex:r.resourceLoadIndex,resourceType:u,resourceUrl:t,attributes:void 0,logger:n});const m=new Promise(c=>{var p;const d=document.createElement("script");d.type="text/javascript",d.src=t,d.async=e,d.onerror=()=>{b({resourceLoadIndex:s,resourceType:u,requestStartTime:l,resourceUrl:t,attributes:void 0,errorDetails:void 0,logger:n}),d.remove();const A={type:w.FAILED};c(A)},d.onload=()=>{Oe({resourceLoadIndex:s,resourceType:u,requestStartTime:l,resourceUrl:t,attributes:void 0,logger:n});const A={type:w.SUCCESS,scriptElement:d};c(A)},(p=document.getElementsByTagName("head")[0])==null||p.appendChild(d)});return Pe(m,o).catch(c=>(c instanceof Error&&b({resourceLoadIndex:s,resourceType:u,requestStartTime:l,resourceUrl:t,attributes:void 0,errorDetails:c.message,logger:n}),Promise.resolve({type:w.FAILED})))}const R={SUCCESS:"success",DUPLICATE:"duplicate",FAILED:"failed"};function ut(t,e,r,n,o){const i=document.querySelectorAll(`link[href='${t}']`);if(i.length>0){const c={type:R.DUPLICATE,linkElement:i[0]};return Promise.resolve(c)}const s=(n.resourceLoadIndex??0)+1;n.resourceLoadIndex=s;const u="🎨 CSS",l=new Date;Re({resourceLoadIndex:s,resourceType:u,resourceUrl:t,attributes:e,logger:o});const m=new Promise(c=>{var p;const d=document.createElement("link");d.rel="stylesheet",d.href=t,e!==void 0&&Object.entries(e).forEach(([A,S])=>{d.setAttribute(A,S)}),d.onerror=()=>{b({resourceLoadIndex:s,resourceType:u,requestStartTime:l,resourceUrl:t,attributes:e,errorDetails:void 0,logger:o}),d.remove();const A={type:R.FAILED};c(A)},d.onload=()=>{Oe({resourceLoadIndex:s,resourceType:u,requestStartTime:l,resourceUrl:t,attributes:e,logger:o});const A={type:R.SUCCESS,linkElement:d};c(A)},(p=document.getElementsByTagName("head")[0])==null||p.appendChild(d)});return Pe(m,r).catch(c=>(b({resourceLoadIndex:s,resourceType:u,requestStartTime:l,resourceUrl:t,attributes:void 0,errorDetails:c instanceof Error?c.message:void 0,logger:o}),Promise.resolve({type:R.FAILED})))}function dt(t){return Object.entries(t).map(([e,r])=>`${encodeURIComponent(e)}=${encodeURIComponent(r.substring(0,150))}`).join("&")}function lt(t,e){const r={};return Object.entries(e.baseQueryParams).forEach(([n,o])=>{r[n]=o}),r.ownerid=e.storeId.toString(),e.cssSelectorsPrefix!==""&&(r["id-selector"]=e.cssSelectorsPrefix),e.isHoverDisabled&&(r.hover="disable"),e.chameleonParams.colors!==void 0&&Object.entries(e.chameleonParams.colors).forEach(([n,o])=>{r[n]=o}),e.chameleonParams.fontFamily!==void 0&&(r["font-family"]=e.chameleonParams.fontFamily),e.chameleonParams.useExactColors&&(r.useExactGalleryColors="true"),r.frontendV2="true",`${t}?${dt(r)}`}const gt=1e4;function ht(){return"ontouchstart"in window&&typeof window.matchMedia=="function"&&!window.matchMedia("(pointer: fine)").matches&&window.matchMedia("(hover: none)").matches}function mt(t,e,r,n,o){var c;const i={baseQueryParams:e.stylesheetsSettings.baseQueryParams,cssSelectorsPrefix:((c=r.stylesheet)==null?void 0:c.cssSelectorsPrefix)??"",chameleonParams:Ce(e.isChameleonEnabled,r.ecConfig),isHoverDisabled:ht(),storeId:t},s={"data-ec-stylesheet":""},u=d=>{const p=lt(d,i);return ut(p,s,gt,n,o)},l=(d,p)=>{try{const A=new URL(d);Array.from(document.getElementsByTagName("link")).forEach(S=>{try{const se=new URL(S.href);se.origin===A.origin&&se.pathname===A.pathname&&S!==p&&(o.info(g.RESOURCES,"Removing not actual stylesheet link element",S.href),S.remove())}finally{}})}finally{}},m=e.stylesheetsSettings.baseUrl;return u(m.primaryUrl).then(d=>(d.type===R.SUCCESS&&l(m.primaryUrl,d.linkElement),d)).catch(()=>u(m.fallbackUrl))}function te(t,e){return{widgetType:t,id:e.id!==""?e.id:void 0,currentScript:void 0,element:e,arg:[],mountState:I.UNMOUNTED,unmountFn:void 0}}function pt(t){window.ec.config=window.ec.config??{},window.ec.config.chameleonDefaults=window.ec.config.chameleonDefaults??{},window.ec.config.chameleonDefaults.gallery=window.ec.config.chameleonDefaults.gallery??{},t.colors!==void 0&&(window.ec.config.chameleonDefaults.colors=t.colors),t.fontFamily!==void 0&&(window.ec.config.chameleonDefaults.font={"font-family":t.fontFamily})}function ft(t){var e;window.css_selectors_prefix=((e=t.stylesheet)==null?void 0:e.cssSelectorsPrefix)??""}function At(t){window.ecwidMessages={...window.ecwidMessages,...t.translationsSettings.overrides}}function Et(t){if(t.cssSelectorsPrefix!==void 0)return t.cssSelectorsPrefix;let e="";return t.isCssSelectorsPrefixDisabled!==!0&&(t.htmlTagId!==void 0||t.bodyTagId!==void 0)&&(t.htmlTagId!==void 0&&(e+=`html#${t.htmlTagId}`),t.htmlTagId!==void 0&&t.bodyTagId!==void 0&&(e+=" "),t.bodyTagId!==void 0&&(e+=`body#${t.bodyTagId}`)),e}function It(t){return JSON.parse(JSON.stringify(t))}function Tt(t){return t.chameleon!==void 0?{...t,chameleon:It(t.chameleon)}:{...t}}const St="ec-storefront-show-i18n-keys",yt="ec-storefront-highlight-version";function _t(t){const e={...t};let r={};return e.queryState!==void 0&&(r=e.queryState,delete e.queryState),{queryState:r,piniaState:e}}function Ct(t,e,r,n,o){return e.then(i=>{ft(r);const s=Ce(i.isChameleonEnabled,r.ecConfig);return pt(s),mt(t,i,r,n,o)})}function Pt(t,e,r){return t.then(n=>{const o=n.translationsSettings.urls.map(i=>de(i.primaryUrl,!0,e,r).then(s=>{s.type===w.FAILED&&de(i.fallbackUrl,!0,e,r)}));return Promise.all(o).then(()=>({locale:window.rosettaLanguageCode,messages:window.rosettaMessages}))})}function wt(t,e){return{...t??{},...e.config??{}}}function Rt(t,e){return{...t??{},...e.order??{}}}function Ot(t,e){return{...t??{},...e.storefront??{}}}function Nt(t){return{containerWidth:t==null?void 0:t.containerWidth}}function Lt(){var t;return((t=C.get(St))==null?void 0:t.toString())==="true"?!0:void 0}function vt(){var t;return((t=C.get(yt))==null?void 0:t.toString())==="true"?!0:void 0}function Dt(t){return{showI18nKeys:Lt()??(t==null?void 0:t.showI18nKeys),shouldHighlightVersion:vt()??(t==null?void 0:t.shouldHighlightVersion)}}function Ut(t,e){return{customHistoryStateHandler:(e==null?void 0:e.customHistoryStateHandler)??(t==null?void 0:t.customHistoryStateHandler)}}function Mt(t,e){const r={cssSelectorsPrefix:(e==null?void 0:e.css_selectors_prefix)??(t==null?void 0:t.cssSelectorsPrefix),isCssSelectorsPrefixDisabled:(e==null?void 0:e.ecwid_nocssrewrite)??(t==null?void 0:t.isCssSelectorsPrefixDisabled),htmlTagId:nt()??(t==null?void 0:t.htmlTagId),bodyTagId:tt()??(t==null?void 0:t.bodyTagId)};return{...r,cssSelectorsPrefix:Et(r)}}function bt(t,e){return{signInProvider:t==null?void 0:t.signInProvider,signInUrls:t==null?void 0:t.signInUrls,ssoProfile:e.ecwid_sso_profile??(t==null?void 0:t.ssoProfile)}}function xt(t){var r;const e=(r=t.globalOverrides)==null?void 0:r.globalOverrides;return{ecConfig:Tt(wt(e==null?void 0:e.ecConfig,window.ec)),ecOrder:Rt(e==null?void 0:e.ecOrder,window.ec),ecStorefront:Ot(e==null?void 0:e.ecStorefront,window.ec),browser:Nt(e==null?void 0:e.browser),debug:Dt(e==null?void 0:e.debug),routing:Ut(e==null?void 0:e.routing,window.Ecwid),stylesheet:Mt(e==null?void 0:e.stylesheet,window),sso:bt(e==null?void 0:e.sso,window)}}function Vt(t,e){const r=Z(t.containerElement);if(r!==void 0)return r;const n=te(e,t.containerElement);return k(n),n}function P(t){if(t.containerElement===void 0||t.containerElement===null)throw new Error("Cannot find containerElement, please sure that it is passed to the widget options correctly.");const{containerElement:e,rootProps:r,states:n}=t;return{containerElement:e,rootProps:r,states:n}}function le(){return document.createElement("div")}class kt{constructor(e){this.options=e}getBootstrapPromise(){return this.options.bootstrapPromise}async createWidget(e,r){const n=r.states??{},{queryState:o,piniaState:i}=_t(n),s=xt(i),u=this.widgetData??this.createWidgetData(s,this.options),l=await this.options.bootstrapPromise;At(l),this.widgetData=u;const m={containerElement:r.containerElement,isHydrateExistingMarkup:Object.keys(n).length>0,queryState:o,piniaState:{...i,globalOverrides:{globalOverrides:s}},rootProps:r.rootProps??{},bootstrap:l,widgetData:u,storefrontApiClient:this.options.storefrontApiClient,sessionStorageOptions:this.options.sessionStorageOptions,requestContext:this.options.requestContext,ecommerce:this.options.ecommerce,logger:this.options.logger};return await(await e).render(m)}createWidgetData(e,r){return{appMode:r.appMode,customizeStorefrontAppsResources:Promise.resolve(void 0),stylesheet:Ct(this.options.sessionStorageOptions.storeId,this.options.bootstrapPromise,e,this.options.requestContext,this.options.logger),translations:Pt(this.options.bootstrapPromise,this.options.requestContext,this.options.logger)}}getOrCreateConfigAndWidget(e,r,n){const o=P(r),i=Vt(o,n);return i.ecwidWidget!==void 0&&i.mountState!==I.UNMOUNTED||(i.mountState=I.MOUNTING,i.ecwidWidget=this.createWidget(e,o).then(s=>(i.mountState=I.MOUNTED,i.unmountFn=()=>{i.mountState=I.UNMOUNTED,i.unmountFn=void 0,s.unmountFn()},s))),i.ecwidWidget}createOrGetStartup(e){if(this.startupApp===void 0){const r=P({containerElement:le(),rootProps:{},states:e.states});this.startupApp=this.createWidget(f(()=>import("./apps-startup.js"),__vite__mapDeps([0,1,2]),import.meta.url),r)}return this.startupApp}createOrGetJsApi(){if(this.jsApi===void 0){const e=P({containerElement:le(),rootProps:{}});this.jsApi=this.createOrGetStartup(e).then(()=>this.createWidget(f(()=>import("./apps-js-api.js"),__vite__mapDeps([3,2,1]),import.meta.url),e))}return this.jsApi}createTracker(e){return this.createOrGetStartup(e).then(()=>this.createWidget(f(()=>import("./apps-tracker.js").then(r=>r.l),__vite__mapDeps([4,2,1]),import.meta.url),P(e)))}createAddToBag(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-add-to-bag.js"),__vite__mapDeps([5,1,2]),import.meta.url),e,a.ADD_TO_BAG))}createCategoriesV1(e){var n;const r=((n=e.rootProps)==null?void 0:n.direction)===q.VERTICAL?a.VERTICAL_CATEGORIES_V1:a.HORIZONTAL_CATEGORIES_V1;return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-categories-v1.js"),__vite__mapDeps([6,2,1]),import.meta.url),e,r))}createCategoriesV2(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-categories-v2.js"),__vite__mapDeps([7,2,1]),import.meta.url),e,a.CATEGORIES_V2))}createMinicartV1(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-minicart-v1.js"),__vite__mapDeps([8,2,1]),import.meta.url),e,a.MINICART_V1))}createMinicartV2(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-minicart-v2.js"),__vite__mapDeps([9,2,1]),import.meta.url),e,a.MINICART_V2))}createProductThumbnail(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-product-thumbnail.js"),__vite__mapDeps([10,1,2]),import.meta.url),e,a.PRODUCT_THUMBNAIL))}createProductBrowser(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-product-browser.js").then(r=>r.b0),__vite__mapDeps([11,2,1]),import.meta.url),e,a.PRODUCT_BROWSER))}createProductBrowserPopup(e){return this.createOrGetStartup(e).then(()=>this.createWidget(f(()=>import("./apps-product-browser-popup.js"),__vite__mapDeps([12,2,1]),import.meta.url),P(e)))}createSearchPanel(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-search-panel.js"),__vite__mapDeps([13,2,1]),import.meta.url),e,a.SEARCH_PANEL))}createSearchWidget(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-search-widget.js"),__vite__mapDeps([14,2,1]),import.meta.url),e,a.SEARCH_WIDGET))}createSingleProduct(e){return this.createOrGetStartup(e).then(()=>this.getOrCreateConfigAndWidget(f(()=>import("./apps-single-product.js"),__vite__mapDeps([15,1,2]),import.meta.url),e,a.SINGLE_PRODUCT))}}class Ft{constructor(e){this.legacyApiImpl=e}setInternalState(e){return this.legacyApiImpl.ensureJsApiSync().setRouterExternalState(e)}}const Ne={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"},F={RECT:"RECT",PILL:"PILL",NONE:"NONE"},Le={BAG:"BAG",CART:"CART",BASKET:"BASKET"},ve={SMALL_ICON:"SMALL_ICON",SMALL_ICON_COUNTER:"SMALL_ICON_COUNTER",COUNTER_ONLY:"COUNTER_ONLY",TITLE_COUNTER:"TITLE_COUNTER",MEDIUM_ICON_COUNTER:"MEDIUM_ICON_COUNTER",MEDIUM_ICON_TITLE_COUNTER:"MEDIUM_ICON_TITLE_COUNTER",BIG_ICON_TITLE_SUBTOTAL:"BIG_ICON_TITLE_SUBTOTAL",BIG_ICON_DETAILS_SUBTOTAL:"BIG_ICON_DETAILS_SUBTOTAL"},h={DATA_LAYOUT:"data-layout",DATA_ICON:"data-icon",DATA_FIXED:"data-fixed",DATA_FIXED_POSITION:"data-fixed-position",DATA_FIXED_SHAPE:"data-fixed-shape",DATA_HORIZONTAL_INDENT:"data-horizontal-indent",DATA_VERTICAL_INDENT:"data-vertical-indent",DATA_RESPONSIVE:"data-responsive",DATA_CUSTOM_ICON_URL:"data-custom-icon-url",DATA_SHOW_EMPTY_CART:"data-show-empty-cart",DATA_SHOW_BUY_ANIMATION:"data-show-buy-animation"};function Wt(){const t=document.createElement("div");return t.setAttribute(h.DATA_FIXED,"true"),t.setAttribute(h.DATA_FIXED_SHAPE,F.PILL),t.setAttribute(h.DATA_SHOW_EMPTY_CART,"false"),t.className=Q,t}function De(t){if(t!==void 0){const e=document.getElementById(t);if(e!==null)return e}}const ge="autogenerated";function Bt(t){if(t===void 0)return document.body;const e=t.nextElementSibling;if(e instanceof HTMLElement&&e.dataset[ge]!==void 0)return e;const r=document.createElement("div");return r.dataset[ge]="true",t.insertAdjacentElement("afterend",r),r}function Y(t){const e=document.createElement("div");return e.id=t.id??`${t.widgetType}-${new Date().getTime()}`,Bt(t.currentScript).appendChild(e),e}function z(t){if(t.element!==void 0&&t.element!==null)return t.element;const e=De(t.id);if(e!==void 0)return e}class Gt{constructor(e,r,n){this.affiliateId=void 0,this.OnAPILoaded={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onApiLoaded(o)})}},this.OnCartChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onCartChanged(o)})}},this.OnCartSynchronized={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onCartSynchronized(o)})},clear:()=>{this.legacyApiImpl.getJsApiAsync().then(o=>{o.clearCartSynchronizedHandlers()})}},this.OnConsentChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onConsentChanged(o)})}},this.OnOrderPlaced={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onOrderPlaced(o)})}},this.OnPageLoad={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onPageLoad(o)})}},this.OnPageLoaded={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onPageLoaded(o)})}},this.OnPageSwitch={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onPageSwitch(o)})}},this.OnProductOptionsChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onProductOptionsChanged(o)})}},this.OnRouterExternalStateChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onRouterExternalStateChanged(o)})},clear:()=>{this.legacyApiImpl.getJsApiAsync().then(o=>{o.clearRouterExternalStateChangedHandlers()})}},this.OnSessionChanged={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onSessionChanged(o)})}},this.OnSetProfile={add:o=>{this.legacyApiImpl.getJsApiAsync().then(i=>{i.onSetProfile(o)})}},this.legacyApiImpl=e,this.widgetRendererImpl=r,this.logger=n}customerSignOut(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.customerSignOut(e)})}createMinicartV2Config(e=void 0){let r=e;r===void 0&&(r=Wt(),document.body.appendChild(r));const n=te(a.MINICART_V2,r);return k(n),n}addMinicartV2Widgets(){const e=Array.from(document.getElementsByClassName(Q));if(e.length>0){const n=e.filter(o=>Z(o)===void 0).map(o=>this.createMinicartV2Config(o));return Promise.resolve(n)}if(qe()&&!Se()&&!ye()){const n=this.createMinicartV2Config();return Promise.resolve([n])}return this.legacyApiImpl.getEcommerce().widgets.getBootstrapPromise().then(n=>{var o,i;return n.shouldInitMinicartForced&&((o=window.ec.storefront)==null?void 0:o.show_cart_widget)!==!1||((i=window.ec.storefront)==null?void 0:i.show_cart_widget)===!0?[this.createMinicartV2Config()]:[]})}_showPBLoader(){this.logger.warn(g.DEPRECATION,"Method Ecwid._showPBLoader() is a dummy in current implementation")}_onComplete(){this.logger.warn(g.DEPRECATION,"Method Ecwid._onComplete() is a dummy in current implementation")}destroy(){const e=ue().filter(r=>r.widgetType===a.PRODUCT_BROWSER);e.length>0&&(this.logger.info(g.JS_API,"Ecwid.destroy()"),e.forEach(r=>{r.unmountFn!==void 0&&r.unmountFn()}))}formatCurrency(e){return this.legacyApiImpl.ensureJsApiSync().formatCurrency(e)}init(){this.logger.info(g.JS_API,"Ecwid.init()"),setTimeout(()=>{Te().forEach(e=>this.initWidget(e)),this.addMinicartV2Widgets().then(e=>{e.forEach(r=>this.initWidget(r))})},0)}initWidget(e){try{let r=z(e);if(e.id!==void 0&&r===void 0)throw new Error(`No such element: ${e.id}`);r=r??Y(e),e.element=r,e.id=r.id,this.widgetRendererImpl.renderWidget(e,r).then()}catch(r){this.logger.warn(g.APP_LIFECYCLE,"Cannot initialize widget",r)}}isStorefrontV3(){throw new Error("This method is implemented in entrypoint and should not be invoked")}getAppPublicConfig(e){return this.legacyApiImpl.ensureJsApiSync().getAppPublicConfig(e)}getAppPublicToken(e){return this.legacyApiImpl.ensureJsApiSync().getAppPublicToken(e)}getAndClearLegacyStorefrontNotice(){return this.legacyApiImpl.ensureJsApiSync().getAndClearLegacyStorefrontNotice()}getCheckoutInfo(){return this.legacyApiImpl.ensureJsApiSync().getCheckoutInfo()}getLegacyAuthToken(){return this.legacyApiImpl.ensureJsApiSync().getLegacyAuthToken()}getFeatureToggles(){return this.legacyApiImpl.ensureJsApiSync().getFeatureToggles()}getInitializedWidgets(){const e=ue().map(n=>n.widgetType),r=[...new Set(e)];return this.logger.info(g.JS_API,"Ecwid.getInitializedWidgets()",r),r}getPageSwitchCallbacks(){return this.legacyApiImpl.ensureJsApiSync().getPageSwitchCallbacks()}getStoreConfiguration(){return this.legacyApiImpl.ensureJsApiSync().getStoreConfiguration()}getStorefrontLang(){return this.legacyApiImpl.ensureJsApiSync().getStorefrontLang()}getOwnerId(){throw new Error("This method is implemented in entrypoint and should not be invoked")}getStaticBaseUrl(){return this.logger.warn(g.DEPRECATION,`Method Ecwid.getStaticBaseUrl() returns nothing in current implementation.
If you use this method in your scripts, please contact us at https://support.ecwid.com/hc/en-us/requests/new`),""}getTrackingConsent(){return this.legacyApiImpl.ensureJsApiSync().getTrackingConsent()}getVisitorLocation(){return this.legacyApiImpl.ensureJsApiSync().getVisitorLocation()}openCookiesSettingSidePanel(){return this.legacyApiImpl.ensureJsApiSync().openCookiesSettingSidePanel()}openPage(e,r){return this.legacyApiImpl.ensureJsApiSync().openPage(e,r)}refreshConfig(){this.legacyApiImpl.ensureJsApiSync().refreshEcOverrides(window.ec)}resizeProductBrowser(){this.logger.warn(g.DEPRECATION,"Method Ecwid.resizeProductBrowser() is do nothing in current implementation and its call can be removed")}setSignInProvider(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setSignInProvider(e)})}setSignInUrls(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setSignInUrls(e)})}setSsoProfile(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setSsoProfile(e)})}setCheckoutInfo(e){this.legacyApiImpl.ensureJsApiSync().setCheckoutInfo(e)}setLegacyAuthToken(e){this.legacyApiImpl.ensureJsApiSync().setLegacyAuthToken(e)}setSession(e){this.legacyApiImpl.ensureJsApiSync().setSession(e)}setStorefrontBaseUrl(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setStorefrontBaseUrl(e)})}setTrackingConsent(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.setTrackingConsent(e)})}showProductFilters(){this.legacyApiImpl.ensureJsApiSync().showProductFilters()}}function Ue(t){const e={};return t.forEach(r=>{const n=r.split("=");if(n.length===2){const o=n[0],i=n[1];o!==void 0&&i!==void 0&&(e[o]=i)}}),e}const Ht="id";function Jt(t){return t.find(e=>e instanceof HTMLScriptElement)}const $t=t=>t.filter(e=>typeof e=="string");function qt(t,e){const r=Jt(e),n=$t(e),i=Ue(n)[Ht];return{widgetType:t,id:i,element:De(i),currentScript:r,arg:n,mountState:I.UNMOUNTED,unmountFn:void 0}}function jt(t){document.querySelectorAll("div[itemtype='http://schema.org/Product'], div[itemtype='https://schema.org/Product']").forEach(r=>{Z(r)===void 0&&k(te(t,r))})}class Yt{constructor(e,r){this.widgetRendererImpl=e,this.logger=r}xWidget(e,r){try{const n=qt(e,r),o=z(n)??Y(n);n.element=o,n.id=o.id,k(n),this.widgetRendererImpl.renderWidget(n,o)}catch(n){this.logger.warn(g.APP_LIFECYCLE,"Cannot initialize widget",n)}}addMinicartIfNeeded(){!Se()&&!ye()&&this.xWidget(a.MINICART_V2,[`${h.DATA_FIXED}=true`,`${h.DATA_FIXED_SHAPE}=${F.PILL}`,`${h.DATA_SHOW_EMPTY_CART}=false`])}xSingleProductWidgets(e){jt(e),Te().filter(r=>r.widgetType===e).forEach(r=>{try{const n=z(r)??Y(r);r.element=n,r.id=n.id,this.widgetRendererImpl.renderWidget(r,n).then(()=>this.addMinicartIfNeeded())}catch(n){this.logger.warn(g.APP_LIFECYCLE,"Cannot initialize widget",n)}})}xProductBrowser(...e){window.getEcwidV3Object().destroy(),this.xWidget(a.PRODUCT_BROWSER,e)}xMinicart(...e){this.xWidget(a.MINICART_V1,e)}xSearchPanel(...e){this.xWidget(a.SEARCH_PANEL,e)}xSearch(...e){this.xWidget(a.SEARCH_WIDGET,e)}xCategories(...e){this.xWidget(a.HORIZONTAL_CATEGORIES_V1,e)}xCategoriesV2(...e){this.xWidget(a.CATEGORIES_V2,e)}xVCategories(...e){this.xWidget(a.VERTICAL_CATEGORIES_V1,e)}ecwid_onBodyDone(){this.logger.warn(g.DEPRECATION,"Function window.ecwid_onBodyDone() is deprecated. Use window.Ecwid.init() instead"),window.getEcwidV3Object().init()}xAddToBag(...e){this.xWidget(a.ADD_TO_BAG,e)}xProductThumbnail(...e){this.xWidget(a.PRODUCT_THUMBNAIL,e)}xSingleProduct(){this.xSingleProductWidgets(a.SINGLE_PRODUCT)}xProduct(){this.xSingleProductWidgets(a.PRODUCT)}}class zt{constructor(e){this.legacyApiImpl=e}addProduct(e,r){this.legacyApiImpl.getJsApiAsync().then(n=>{typeof e=="object"?n.addProductToCart(e):n.addProductToCart({id:parseInt(e.toString(),10),callback:r??(()=>{})})})}removeProduct(e,r){this.legacyApiImpl.getJsApiAsync().then(n=>{n.removeFromCart(e,r)})}clear(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.clearCart(e)})}get(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.getCart(e)})}calculateTotal(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.calculateTotal(e)})}gotoCheckout(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.goToCheckout(e)})}canGotoCheckout(e){return this.legacyApiImpl.getJsApiAsync().then(r=>{r.canGoToCheckout(e)}),!0}setCustomerEmail(e,r,n){if(this.isEmptyString(e))return;const o="Ecwid.Cart.setCustomerEmail()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({email:e},r,n,o)})}setOrderComments(e,r,n){if(this.isEmptyString(e))return;const o="Ecwid.Cart.setOrderComments()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({orderComments:e},r,n,o)})}setAddress(e,r,n){const o="Ecwid.Cart.setAddress()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({shippingPerson:e},r,n,o)})}setBillingAddress(e,r,n){const o="Ecwid.Cart.setBillingAddress()";this.legacyApiImpl.getJsApiAsync().then(i=>{i.updateCart({billingPerson:e},r,n,o)})}refreshCartInfo(e){this.legacyApiImpl.getJsApiAsync().then(r=>{r.refreshCartInfo(e)})}isEmptyString(e){return e===void 0||e.trim()===""}}const D={STANDARD:"STANDARD",MINI:"MINI",FLOATING:"FLOATING",UNSUPPORTED:"UNSUPPORTED"};function O(t){var e;switch((e=t==null?void 0:t.toString())==null?void 0:e.toLowerCase()){case"true":case"1":return!0;case"false":case"0":return!1;default:return}}function x(t){if(t!==void 0){const e=parseInt(t==null?void 0:t.toString(),10);if(!Number.isNaN(e))return e}}function dn(t){if(t!==void 0){const e=parseFloat(t);if(!Number.isNaN(e))return e}}function _(t,e){for(const r of Object.keys(t)){const n=t[r];if(n!==void 0&&n.toString()===e)return t[r]}}function re(t,e){const r=t.getAttribute(e);if(r!==null)return r}function K(t,e){const r=re(t,e);return x(r)}function U(t,e){const r=re(t,e);return O(r)}function M(t,e,r){return _(r,t.getAttribute(e))}const he="productid",Kt="layout",Xt="defaultCategoryId",Qt="defaultProductId",Zt=/grid\((?<rows>\d+), *(?<cols>\d+)\)/,er="views",me="productid",pe="data-single-product-id";function tr(t){const e=t[er];if(e!==void 0){const r=e.match(Zt);if(r!==null&&r.groups!==void 0&&r.groups.rows!==void 0&&r.groups.cols!==void 0){const n=Math.max(1,parseInt(r.groups.rows,10)),o=Math.max(1,parseInt(r.groups.cols,10));return n*o}}}function rr(t){const e=t[Xt],r=e!==void 0?parseInt(e,10):NaN;return!Number.isNaN(r)&&r>0?r:void 0}function nr(t){const e=t[Qt],r=e!==void 0?parseInt(e,10):NaN;return!Number.isNaN(r)&&r>0?r:void 0}function or(t,e){const r=e[Kt]??"";return r.toLowerCase().includes("attach")?D.UNSUPPORTED:r==="floating"?D.FLOATING:r==="Mini"?D.MINI:D.STANDARD}function ir(t){const e=x(t[he]);if(e===void 0)throw new Error(`Parameter '${he}' is missing or invalid`);return e}function sr(t,e,r){return{productId:e,pageProductIdsPromise:r}}function cr(t,e){return{layout:or(t,e)}}function ar(t){return{isMobileViewNotAllowed:t.hasAttribute("data-mobile-no"),isChildrenNotAllowed:t.hasAttribute("data-children-no")}}function ur(t){return{layout:M(t,h.DATA_LAYOUT,ve),icon:M(t,h.DATA_ICON,Le),isFixed:U(t,h.DATA_FIXED),fixedPosition:M(t,h.DATA_FIXED_POSITION,Ne),fixedShape:M(t,h.DATA_FIXED_SHAPE,F),horizontalIndent:K(t,h.DATA_HORIZONTAL_INDENT),verticalIndent:K(t,h.DATA_VERTICAL_INDENT),isResponsive:U(t,h.DATA_RESPONSIVE),customIconUrl:re(t,h.DATA_CUSTOM_ICON_URL),showEmptyCart:U(t,h.DATA_SHOW_EMPTY_CART),showBuyAnimation:U(t,h.DATA_SHOW_BUY_ANIMATION)}}function dr(t){return{layout:_(ve,t[h.DATA_LAYOUT]),icon:_(Le,t[h.DATA_ICON]),isFixed:O(t[h.DATA_FIXED]),fixedPosition:_(Ne,t[h.DATA_FIXED_POSITION]),fixedShape:_(F,t[h.DATA_FIXED_SHAPE]),horizontalIndent:x(t[h.DATA_HORIZONTAL_INDENT]),verticalIndent:x(t[h.DATA_VERTICAL_INDENT]),isResponsive:O(t[h.DATA_RESPONSIVE]),customIconUrl:t[h.DATA_CUSTOM_ICON_URL],showEmptyCart:O(t[h.DATA_SHOW_EMPTY_CART]),showBuyAnimation:O(t[h.DATA_SHOW_BUY_ANIMATION])}}function lr(t,e){const r=ur(t),n=dr(e);return{layout:n.layout??r.layout,icon:n.icon??r.icon,isFixed:n.isFixed??r.isFixed,fixedPosition:n.fixedPosition??r.fixedPosition,fixedShape:n.fixedShape??r.fixedShape,horizontalIndent:n.horizontalIndent??r.horizontalIndent,verticalIndent:n.verticalIndent??r.verticalIndent,isResponsive:n.isResponsive??r.isResponsive,customIconUrl:n.customIconUrl??r.customIconUrl,showEmptyCart:n.showEmptyCart??r.showEmptyCart,showBuyAnimation:n.showBuyAnimation??r.showBuyAnimation}}function gr(t){return{defaultCategoryId:rr(t),defaultProductId:nr(t),productsPerPage:tr(t),timeZoneOffset:void 0}}function hr(t){const e=t[me],r=e!==void 0?parseInt(e,10):NaN;if(Number.isNaN(r))throw new Error(`Parameter '${me}' is missing or invalid`);return r}function mr(t,e){return{productId:t,pageProductIdsPromise:e}}function fe(t){const e=K(t,pe);if(e===void 0)throw new Error(`Attribute '${pe}' is missing or invalid`);return e}function Ae(t,e,r){return{productId:t,pageProductIdsPromise:e,isNewLookAndFeel:r}}class pr{constructor(e){this.pageProductIds=new Set,this.ecommerce=e}collectPageProductId(e){return this.pageProductIds.add(e),new Promise(r=>{setTimeout(()=>{const n=[...this.pageProductIds].sort();r(n)},0)})}renderWidget(e,r){const n=Ue(e.arg??[]);switch(e.widgetType){case a.ADD_TO_BAG:{const o=ir(n),i=this.collectPageProductId(o);return this.ecommerce.widgets.createAddToBag({containerElement:r,rootProps:sr(r,o,i)})}case a.HORIZONTAL_CATEGORIES_V1:return this.ecommerce.widgets.createCategoriesV1({containerElement:r,rootProps:{direction:q.HORIZONTAL}});case a.CATEGORIES_V2:return this.ecommerce.widgets.createCategoriesV2({containerElement:r,rootProps:ar(r)});case a.MINICART_V1:return this.ecommerce.widgets.createMinicartV1({containerElement:r,rootProps:cr(r,n)});case a.MINICART_V2:return this.ecommerce.widgets.createMinicartV2({containerElement:r,rootProps:lr(r,n)});case a.PRODUCT:{const o=fe(r),i=this.collectPageProductId(o);return this.ecommerce.widgets.createSingleProduct({containerElement:r,rootProps:Ae(o,i,!0)})}case a.PRODUCT_BROWSER:return this.ecommerce.widgets.createProductBrowser({containerElement:r,rootProps:gr(n)});case a.PRODUCT_THUMBNAIL:{const o=hr(n),i=this.collectPageProductId(o);return this.ecommerce.widgets.createProductThumbnail({containerElement:r,rootProps:mr(o,i)})}case a.SEARCH_PANEL:return this.ecommerce.widgets.createSearchPanel({containerElement:r,rootProps:{}});case a.SEARCH_WIDGET:return this.ecommerce.widgets.createSearchWidget({containerElement:r,rootProps:{}});case a.SINGLE_PRODUCT:{const o=fe(r),i=this.collectPageProductId(o);return this.ecommerce.widgets.createSingleProduct({containerElement:r,rootProps:Ae(o,i,!1)})}case a.VERTICAL_CATEGORIES_V1:return this.ecommerce.widgets.createCategoriesV1({containerElement:r,rootProps:{direction:q.VERTICAL}});default:throw new Error(`Unknown widget type '${e.widgetType}'`)}}}class fr{constructor(e,r,n){this.ecommerce=e;const o=new pr(this.ecommerce);this.ecImpl=new Ft(this),this.ecwidImpl=new Gt(this,o,n),this.ecwidCartImpl=new zt(this),this.windowImpl=new Yt(o,n)}getEcImpl(){return this.ecImpl}getEcwidImpl(){return this.ecwidImpl}getEcwidCartImpl(){return this.ecwidCartImpl}getWindowImpl(){return this.windowImpl}getEcommerce(){return this.ecommerce}ensureJsApiSync(){if(this.jsApiSync===void 0)throw Error(`Ecwid JS API is not initialized!
Please make sure your code is wrapped in an Ecwid.OnAPILoaded.add callback.
See the documentation for more details: https://api-docs.ecwid.com/reference/ecwidonapiloaded#ecwidonapiloaded`);return this.jsApiSync}getJsApiAsync(){const r=this.getEcommerce().widgets.createOrGetJsApi();return r.then(n=>{this.jsApiSync=n}),r}getTrackerAsync(){if(this.trackerAsync===void 0){const e=this.getEcommerce(),r=document.createElement("div");this.trackerAsync=e.widgets.createTracker({containerElement:r,rootProps:{}})}return this.trackerAsync}}class Ar extends EventTarget{addEventListener(e,r,n){super.addEventListener(e,r,n)}removeEventListener(e,r,n){super.removeEventListener(e,r,n)}dispatchTypedEvent(e,r){return super.dispatchEvent(r)}}function Er(t){return typeof t!="function"||!t.toString().includes("[native code]")}function Ir(t,e,r,n){const o=e;Er(o[r])&&(t.warn(g.APP_LIFECYCLE,`Restoring patched browser function '${r}'. Old value:`,o[r]),o[r]=n)}function Tr(){const t=document.createElement("iframe");document.body.appendChild(t);const e=t.contentWindow;try{return e===null?[]:[{target:window.Array,property:"from",iframeCorrectFunc:e.Array.from},{target:Function.prototype,property:"bind",iframeCorrectFunc:e.window.Function.prototype.bind},{target:String.prototype,property:"trim",iframeCorrectFunc:e.window.String.prototype.trim},{target:String.prototype,property:"trimLeft",iframeCorrectFunc:e.window.String.prototype.trimLeft},{target:String.prototype,property:"trimRight",iframeCorrectFunc:e.window.String.prototype.trimRight},{target:window.Promise,property:"allSettled",iframeCorrectFunc:e.window.Promise.allSettled}]}finally{t.remove()}}function Sr(t){try{Tr().forEach(({target:r,property:n,iframeCorrectFunc:o})=>{Ir(t,r,n,o)})}catch(e){t.error(g.APP_LIFECYCLE,"Failed to restore patched browser functions:",e)}}class Me{constructor(e){this.keyNamePlaceholder=e}buildKeyName(e){return this.keyNamePlaceholder.replaceAll("{storeId}",e.toString())}getValue(e){try{return window.localStorage.getItem(this.buildKeyName(e))??void 0}catch{return}}setValue(e,r){try{r===void 0?window.localStorage.removeItem(this.buildKeyName(e)):window.localStorage.setItem(this.buildKeyName(e),r)}catch{}}}function yr(t){const e=t;return typeof t=="object"&&t!==null&&(e.id===void 0||typeof e.id=="string")&&typeof e.itemsCount=="number"}class _r{constructor(){this.checkoutInfoStorage=new Me("ec-{storeId}-checkout")}getValue(e){const r=this.checkoutInfoStorage.getValue(e);if(r!==void 0)try{const n=JSON.parse(r);if(yr(n))return n}catch{}}setValue(e,r){const n=r===void 0?void 0:JSON.stringify(r);this.checkoutInfoStorage.setValue(e,n)}}class Cr{constructor(e,r){this.cookieName=e,this.expiresDays=r}buildCookieName(e){return this.cookieName.replaceAll("{storeId}",e.toString())}getValue(e){return C.get(this.buildCookieName(e))}setValue(e,r){r===void 0?C.remove(this.buildCookieName(e)):C.set(this.buildCookieName(e),r,{sameSite:"none",secure:!0,expires:this.expiresDays})}}class ne{constructor(e){this.storeIdToValueMap={},this.afterSetFn=e}getValue(e){return this.storeIdToValueMap[e]}setValue(e,r){this.storeIdToValueMap[e]!==r&&(this.storeIdToValueMap[e]=r,this.afterSetFn(e,r))}}const oe={ON_SESSION_TOKEN_CHANGED:"ON_SESSION_TOKEN_CHANGED",ON_CHECKOUT_INFO_CHANGED:"ON_CART_ID_CHANGED",ON_LEGACY_AUTH_TOKEN_CHANGED:"ON_LEGACY_AUTH_TOKEN_CHANGED"};class Pr extends ne{constructor(e){super((r,n)=>{e.publish(oe.ON_SESSION_TOKEN_CHANGED,n)})}}class wr extends ne{constructor(e){super((r,n)=>{e.publish(oe.ON_CHECKOUT_INFO_CHANGED,n)})}}class Rr extends ne{constructor(e){super((r,n)=>{e.publish(oe.ON_LEGACY_AUTH_TOKEN_CHANGED,n)})}}class J{constructor(e){this.options=e}getValue(e){var r;return this.options.inMemoryStorage.getValue(e)??((r=this.options.externalStorage)==null?void 0:r.getValue(e))}setValue(e,r){var n;(n=this.options.externalStorage)==null||n.setValue(e,r),this.options.inMemoryStorage.setValue(e,r)}}const Ee="PS",Or=3*30;function X(t){var e,r;if(((r=(e=window.ec)==null?void 0:e.config)==null?void 0:r.disable_all_cookies)!==!0)return t()}function Nr(){return X(()=>new Cr("ec-{storeId}-session",Or))}function Lr(t,e,r){const n=new Pr(r),o=new J({inMemoryStorage:n,externalStorage:e??Nr()}),i=new wr(r),s=new J({inMemoryStorage:i,externalStorage:X(()=>new _r)}),u=new Rr(r),l=new J({inMemoryStorage:u,externalStorage:X(()=>new Me(`${Ee}ecwid__{storeId}${Ee}token`))});return{storeId:t,sessionToken:o,checkoutInfo:s,legacyAuthToken:l,sessionStorageEventBus:r}}function vr(t){return new Promise(e=>{setTimeout(()=>e(t()))})}function Dr(t){const e=t.storeId,r=t.sessionToken.getValue(e);return r!==void 0?{Authorization:`Bearer ${r}`}:{}}function Ur(t){return JSON.stringify(t)}function Mr(t,e){return new Headers({"Content-Type":"application/json",...Dr(t),...e})}async function br(t,e,r,n){return vr(()=>({method:t,mode:"cors",headers:Mr(r,n),body:Ur(e)}))}async function xr(t,e,r){const n=new AbortController,o={...e,signal:n.signal},i=setTimeout(()=>{const s=new DOMException("The user aborted a request.","AbortError");n.abort(s)},r);try{return await fetch(t,o)}finally{clearTimeout(i)}}const be="StorefrontApiBusinessError";class Vr extends Error{constructor(e,r){super(e.statusText),this.type=be,this.response=e;try{this.data=JSON.parse(r)}catch{this.data=void 0}this.text=r}isBadRequestError(){return this.response.status===400}isUnauthorizedError(){return this.response.status===401}isNotFoundError(){return this.response.status===404}getData(){return this.data}getText(){return this.text}getResponse(){return this.response}}function V(t){return"type"in t&&t.type===be}const kr=8,Fr=3e4;function Wr(t,e,r){if((e==null?void 0:e.isRetryable)===!1||t>=kr)return!1;if(V(r)){const n=r.getResponse().status;return n>=500&&n<=599}return!0}function xe(t){return new Date().getTime()-t.getTime()}function W(t){return t>1?[`(x${t})`]:[]}function Br(t){var o;const e=xe(t.requestStartDate),r=t.error.getResponse(),n=[`#${t.currentRequestIndex}`,...W(t.retryNumber),"⛌",`[${e} ms]`,`[${r.status} ${r.statusText}]`,(o=t.requestMethod)==null?void 0:o.toUpperCase(),t.url,t.error.getData()??t.error.getText()];t.logger.warn(g.REST,...n)}function Gr(t){var r;const e=[`#${t.currentRequestIndex}`,...W(t.retryNumber),"⛌",(r=t.requestMethod)==null?void 0:r.toUpperCase(),t.url,t.error.message];t.logger.warn(g.REST,...e)}function Hr(t){V(t.error)?Br({logger:t.logger,requestStartDate:t.requestStartDate,currentRequestIndex:t.currentRequestIndex,retryNumber:t.retryNumber,requestMethod:t.requestMethod,url:t.url,error:t.error}):Gr({logger:t.logger,url:t.url,currentRequestIndex:t.currentRequestIndex,retryNumber:t.retryNumber,requestMethod:t.requestMethod,error:t.error.getError()})}function Jr(t){const e=[`#${t.currentRequestIndex}`,...W(t.retryNumber),"⮕",t.requestMethod.toUpperCase(),t.url,t.data];t.logger.info(g.REST,...e)}function $r(t){var o;const e=xe(t.requestStartDate),r=`${t.responseStatus} ${t.responseStatusText}`.trim(),n=[`#${t.currentRequestIndex}`,...W(t.retryNumber),"⬅",`[${e} ms]`,`[${r}]`,(o=t.requestMethod)==null?void 0:o.toUpperCase(),t.url,t.responseData];t.logger.info(g.REST,...n)}const qr="StorefrontApiFatalError";class jr extends Error{constructor(e){super(e.message),this.type=qr,this.error=e}getError(){return this.error}}function Yr(t){const e=2**t*100,r=e*.2*Math.random();return e+r}function zr(t){return new Promise(e=>{setTimeout(()=>e,Yr(t))})}class Kr{constructor(e,r,n,o){this.requestIndex=0,this.sessionStorageOptions=e,this.apiBaseUrl=r,this.additionalHeaders=n,this.logger=o}createRequestUrl(e){return`${this.apiBaseUrl}/${this.sessionStorageOptions.storeId}${e}`}async makeRequest(e,r,n){let o=1;this.requestIndex+=1;const i="post",s=this.requestIndex,u=async()=>{const l=new Date;try{Jr({logger:this.logger,url:e,data:r,currentRequestIndex:s,retryNumber:o,requestMethod:i});const m=await br(i,r,this.sessionStorageOptions,this.additionalHeaders),c=await xr(this.createRequestUrl(e),m,Fr);if(!c.ok){const p=await c.text();throw new Vr(c,p)}const d=await c.json();return $r({logger:this.logger,url:e,currentRequestIndex:s,retryNumber:o,requestStartDate:l,requestMethod:i,responseStatus:c.status,responseStatusText:c.statusText,responseData:d}),{data:d}}catch(m){const c=m,d=V(c)?c:new jr(c);if(Hr({logger:this.logger,url:e,currentRequestIndex:s,retryNumber:o,requestStartDate:l,requestMethod:i,error:d}),V(c)&&c.isUnauthorizedError())throw this.resetInvalidSession(),c;if(Wr(o,n,d))return await zr(o),o+=1,u();throw c}};return u()}resetInvalidSession(){const e=this.sessionStorageOptions.storeId;this.sessionStorageOptions.sessionToken.setValue(e,void 0),this.sessionStorageOptions.checkoutInfo.setValue(e,void 0),this.sessionStorageOptions.legacyAuthToken.setValue(e,void 0)}}const Ie={NORMAL:"NORMAL",PREVIEW:"PREVIEW"};class Xr{constructor(){this.eventListeners=new Map}ensureListeners(e){const r=this.eventListeners.get(e);if(r!==void 0)return r;const n=new Set;return this.eventListeners.set(e,n),n}publish(e,...r){const n=this.eventListeners.get(e);n!==void 0&&n.forEach(o=>{o(...r)})}subscribe(e,r){const n=this.ensureListeners(e);return n.add(r),()=>{n.has(r)&&(n.delete(r),n.size===0&&this.eventListeners.delete(e))}}}function Qr(){return!1}function ln(){var t;return((t=window.top)==null?void 0:t.location)!==window.location}class Zr{constructor(e){this.pubChannels=new Map,this.subChannels=new Map,this.channelsNamePrefix=`ec-${e}-`,window.addEventListener("beforeunload",()=>{this.pubChannels.forEach(r=>r.close()),this.pubChannels.clear(),this.subChannels.forEach(r=>r.close()),this.subChannels.clear()})}publish(e,r){var n;(n=this.getChannel(e,this.pubChannels))==null||n.postMessage(r)}subscribe(e,r){const n=i=>r(i.data),o=()=>{var i;(i=this.getChannel(e,this.subChannels))==null||i.addEventListener("message",n)};return o(),window.addEventListener("pageshow",o),()=>{var i;(i=this.subChannels.get(e))==null||i.removeEventListener("message",n)}}getChannel(e,r){let n=r.get(e);return n===void 0&&!Qr()&&(n=new BroadcastChannel(this.createChannelName(e.toString())),r.set(e,n)),n}createChannelName(e){return`${this.channelsNamePrefix}-${e}`}}const en="ec-storefront-forced-tracing-enabled",tn="X-Ec-Forced-Tracing-Enabled";function rn(){return new at(new He("show_ec_logs"))}function nn(t,e,r){if(t!==void 0)return Promise.resolve(t);const n={lang:e};return r.makeRequest("/bootstrap",n).then(o=>o.data)}function on(t){const e=Math.random()<E.getEcommerceJsParams().tracingSampleRatio;return t||e?{[tn]:"true"}:{}}function sn(t){return{...on(t)}}function cn(t,e){return!!(e||Math.random()<t.sampleRatio)}function an(t,e,r){if(t!==null&&cn(t,r))return f(()=>import("./vendor-datadog-browser-rum.js"),__vite__mapDeps([]),import.meta.url).then(n=>{var i,s;const o=n.datadogRum;return o.init({applicationId:t.applicationId,clientToken:t.clientToken,site:t.site,service:t.service,env:t.env,version:t.version,allowedTracingUrls:[{match:e,propagatorTypes:["tracecontext"]}],sessionSampleRate:100,sessionReplaySampleRate:0,trackingConsent:((s=(i=window.ec)==null?void 0:i.config)==null?void 0:s.disable_all_cookies)===!0?"not-granted":"granted",trackUserInteractions:!0,trackResources:!0,trackLongTasks:!0}),o})}class ie extends Ar{static updateGlobalEcommerceInstance(e){window.Ecwid.ecommerceInstance===void 0&&(window.Ecwid.ecommerceInstance=e)}constructor(e){super(),ie.updateGlobalEcommerceInstance(this);const r=rn();Sr(r);const n=E.getEntryPointQueryParams(),o=(e==null?void 0:e.storeId)??n.storeId,i=(e==null?void 0:e.apiBaseUrl)??E.getEcommerceJsParams().apiBaseUrl,s=(e==null?void 0:e.lang)??n.lang,u=_(Ie,e==null?void 0:e.appMode)??Ie.NORMAL,l=C.get(en)==="true",m=an(E.getEcommerceJsParams().datadogRum,i,l),c={ecommerceEventTarget:this,sessionStorageEventBus:new Zr(o),apiEventBus:new Xr,datadogRumPromise:m},d=Lr(o,e==null?void 0:e.externalSessionTokenStorage,c.sessionStorageEventBus);this.legacyApiImpl=new fr(this,c,r);const p=new Kr(d,i,sn(l),r),A=nn(e==null?void 0:e.bootstrap,s,p);this.widgets=new kt({appMode:u,bootstrapPromise:A,ecommerce:this,logger:r,requestContext:c,sessionStorageOptions:d,storefrontApiClient:p})}addEventListener(e,r,n){this.legacyApiImpl.getJsApiAsync().then(()=>{super.addEventListener(e,r,n)})}}window.ec=window.ec??{};window.ec.config=window.ec.config??{};window.ec.order=window.ec.order??{};window.ec.storefront=window.ec.storefront??{};window._xnext_initialization_scripts=window._xnext_initialization_scripts??[];window.Ecommerce=ie;window.EcommerceGlobals=E;window.rtCommonProps!==void 0&&(delete window.rtCommonProps["new.store.fix.ecwid.back.bug"],delete window.rtCommonProps["new.store.accountPage.ecwid.signIn.fix"]);(()=>{const t=new CustomEvent("ecommerce.ready");document.dispatchEvent(t)})();export{Ie as A,q as C,a as D,ie as E,g as L,D as M,oe as S,f as _,_ as a,ve as b,Ne as c,F as d,Le as e,ln as f,de as g,w as h,V as i,Qr as j,ut as k,mt as l,dn as m,O as n,T as o,x as p,k as q,un as r,qt as s,Z as t,Tt as u,Se as v};
//# sourceMappingURL=https://storefront.local.ecwid.com:16088/static/ecommerce.js.map
